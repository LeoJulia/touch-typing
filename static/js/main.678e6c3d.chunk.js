(this["webpackJsonptouch-typing"]=this["webpackJsonptouch-typing"]||[]).push([[0],{23:function(t,e,n){t.exports=n(36)},35:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=n(17),u=n(18),s=n(7),l=n(4),p=n(1),d=n(2),f=function(t){var e=t.typingText;return e?e.activeText:""},v=function(t){var e=t.typingText;return!!e&&e.isTimer},m=function(t){var e=t.typingText;return e?e.startTime:null},h=function(t){var e=t.typingText;return e?e.endTime:null},x=function(t){return{type:"START_RACE",time:t}};var T=function(t){var e=t.startTime,n=t.endTime-e,r=t.symbolCount/(n/6e4);return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ".concat(function(t){var e=Math.floor(t/6e4),n=+(t%6e4/1e3).toFixed(0);return"".concat(e," : ").concat(n<10?"0":"").concat(n)}(n))),a.a.createElement("span",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c: ".concat(Math.round(r)," \u0437\u043d/\u043c\u0438\u043d")))},b=n(5),g=n(6),y=n(9),E=n(8);function j(){var t=Object(p.a)(["\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: var(--grayTransparent);\n\n  & span {\n    display: block;\n    color: var(--white);\n    font-size: 150px;\n  }\n"]);return j=function(){return t},t}var O=d.a.div(j()),k=function(t){Object(y.a)(n,t);var e=Object(E.a)(n);function n(t){var r;return Object(b.a)(this,n),(r=e.call(this,t)).timerID=void 0,r.state={value:3},r}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval((function(){-1!==t.state.value&&t.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var t=this;this.setState((function(t){var e=t.value;return{value:--e}}),(function(){var e=t.state.value,n=t.props.onEnd;-1===e&&n(Date.now())}))}},{key:"render",value:function(){var t=this.state.value;return a.a.createElement(O,null,a.a.createElement("span",null,t))}}]),n}(r.Component);function F(){var t=Object(p.a)(["\n  margin-top: 15px;\n  border-radius: 10px;\n  border: 1px dashed var(--white);\n  padding: 5px;\n  width: 100px;\n  text-align: center;\n  background-color: transparent;\n  color: var(--white);\n  outline: none;\n\n  &:hover {\n    cursor: pointer;\n    background-color: var(--red);\n  }\n"]);return F=function(){return t},t}var w=d.a.button(F()),S={startRace:x,restartRace:function(){return{type:"RESTART_RACE"}}},C=Object(s.b)((function(t){return{startTime:m(t),endTime:h(t),text:f(t),isTimer:v(t)}}),S)((function(t){var e=t.startTime,n=t.endTime,r=t.text,o=t.isTimer,i=t.startRace,c=t.restartRace;return a.a.createElement(a.a.Fragment,null,!e&&!n&&a.a.createElement(Y,null),o&&a.a.createElement(k,{onEnd:i}),e&&!n&&a.a.createElement(it,null),n&&e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(T,{startTime:e,endTime:n,symbolCount:r.length}),a.a.createElement(w,{onClick:function(){return c()}},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")))}));function R(){var t=Object(p.a)(["\n  background-color: var(--dark);\n  color: var(--white);\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n"]);return R=function(){return t},t}var I=d.a.div(R());function A(){return a.a.createElement(I,null,a.a.createElement(C,null))}function _(){var t=Object(p.a)(["\n  background-image: url(",");\n  width: 50px;\n  height: 50px;\n  border: 1px dashed var(--white);\n  border-radius: 50%;\n  margin-bottom: 15px;\n"]);return _=function(){return t},t}var L=d.a.img(_(),(function(t){return t.img})),D=function(t){var e=t.img;return a.a.createElement(L,{img:e})};function M(){var t=Object(p.a)(["\n  width: 40%;\n  height: 200px;\n  background-color: var(--gray);\n  color: var(--dark);\n  padding: 15px;\n  border-radius: 15px;\n  border: 1px dashed var(--blue);\n"]);return M=function(){return t},t}D.defaultProps={img:"https://picsum.photos/50"};var G=d.a.div(M()),N=function(t){var e=t.text;return a.a.createElement(G,null,e)};function U(){var t=Object(p.a)(["\n  margin-top: 15px;\n  width: 40%;\n  padding: 10px;\n  background-color: var(--white);\n  color: var(--dark);\n  border-radius: 15px;\n  border: none;\n  outline: none;\n\n  &:disabled {\n    background-color: var(--darkGray);\n  }\n"]);return U=function(){return t},t}var W=d.a.input(U()),H=function(t){Object(y.a)(n,t);var e=Object(E.a)(n);function n(){var t;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).onInput=function(e){var n=e.target;(0,t.props.onInput)(n.value)},t}return Object(g.a)(n,[{key:"render",value:function(){var t=this.props,e=t.value,n=t.isFinish,r=t.setRef,o=t.maxLength;return a.a.createElement(W,{type:"text",onChange:this.onInput,value:e,disabled:n,ref:r,maxLength:o})}}]),n}(r.Component);function X(){var t=Object(p.a)(["\n  flex-grow: 3;\n"]);return X=function(){return t},t}function z(){var t=Object(p.a)(["\n  display: flex;\n  padding: 5px;\n  width: 200px;\n"]);return z=function(){return t},t}function B(){var t=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return B=function(){return t},t}function J(){var t=Object(p.a)(["\n  flex-grow: 1;\n  border-radius: 10px;\n  border: 1px dashed var(--white);\n  padding: 5px;\n  width: 100px;\n  background-color: transparent;\n  color: var(--white);\n  outline: none;\n\n  &:hover {\n    cursor: pointer;\n    background-color: var(--red);\n  }\n"]);return J=function(){return t},t}var Q=d.a.button(J()),V=d.a.div(B()),P=d.a.div(z()),$=d.a.div(X()),q={startTimer:function(t){return{type:"START_TIMER",text:t}},changeLang:function(t){return{type:"CHANGE_LANG",langCode:t}},fetchTexts:function(){return function(t){return t({type:"REQUEST_TEXTS"}),fetch("https://glacial-earth-88103.herokuapp.com/training").then((function(t){return t.json()}),(function(t){return console.error("An error occurred.",t)})).then((function(e){return t(function(t){return{type:"RECEIVE_TEXTS",texts:t}}(e))}))}}},K=function(t){Object(y.a)(n,t);var e=Object(E.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchTexts)()}},{key:"render",value:function(){var t=this.props,e=t.startTimer,n=t.texts;return a.a.createElement(a.a.Fragment,null,a.a.createElement(D,null),a.a.createElement(V,null,n.map((function(t){return a.a.createElement(P,{key:t._id},a.a.createElement($,null,t.title),a.a.createElement(Q,{onClick:function(){return e(t.text.slice(0,100))}},"\u041d\u0430\u0447\u0430\u0442\u044c"))}))))}}]),n}(r.Component),Y=Object(s.b)((function(t){return{texts:(e=t,e.textConfig.texts)};var e}),q)(K),Z=n(13);function tt(){var t=Object(p.a)(["\n  color: ",";\n  text-decoration: underline;\n"]);return tt=function(){return t},t}function et(){var t=Object(p.a)(["\n  color: var(--darkGray);\n"]);return et=function(){return t},t}var nt=d.a.span(et()),rt=d.a.span(tt(),(function(t){return t.isError?"var(--red)":"var(--blue)"})),at={setFinish:function(t){return{type:"FINISH",time:t}},startRace:x},ot=function(t){Object(y.a)(n,t);var e=Object(E.a)(n);function n(t){var r;return Object(b.a)(this,n),(r=e.call(this,t)).input=void 0,r.onClear=function(t){if(8===t.keyCode){var e=r.state,n=e.typeFocusText,a=e.typingText;-1!==n.indexOf(a)&&r.setState({isError:!1})}},r.onTyping=function(t){var e=t.keyCode,n=t.key,a=r.state,o=a.afterFocusText,i=a.typeFocusText,c=a.typingText,u=a.isError;if(i.split("")[c.length]!==n&&r.setState({isError:!0}),i.length===c.length&&32===e&&!u){var s=Object(Z.a)(o),l=i,p=s.shift();r.setState((function(t){return{typeFocusText:p,afterFocusText:s,beforeFocusText:[].concat(Object(Z.a)(t.beforeFocusText),[l]),isError:!1,typingText:"",isSuccessInput:!0}}))}if(0===o.length&&("."===n||"!"===n||"?"===n||" "===n)&&!u){var d=r.props.setFinish,f=i;r.setState((function(t){return{typeFocusText:"",typingText:"",isSuccessInput:!0,beforeFocusText:[].concat(Object(Z.a)(t.beforeFocusText),[f]),afterFocusText:[]}})),d(Date.now())}},r.onInput=function(t){r.state.isSuccessInput?r.setState({isSuccessInput:!1}):r.setState({typingText:t})},r.state={typingText:"",isError:!1,beforeFocusText:[],typeFocusText:"",afterFocusText:[],isSuccessInput:!1},r.input=null,r}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.text.split(" "),e=t.shift();document.addEventListener("keypress",this.onTyping),document.addEventListener("keyup",this.onClear),this.setState({beforeFocusText:[],typeFocusText:e,afterFocusText:t})}},{key:"componentDidUpdate",value:function(){this.props.startTime&&this.input.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.onTyping),document.removeEventListener("keyup",this.onClear)}},{key:"render",value:function(){var t=this,e=this.state,n=e.afterFocusText,r=e.typeFocusText,o=e.beforeFocusText,i=e.typingText,c=e.isError,u=this.props.endTime,s=a.a.createElement("span",null,a.a.createElement(nt,null,"".concat(o.join(" ")," ")),a.a.createElement(rt,{isError:c},r)," ".concat(n.join(" ")," "));return a.a.createElement(a.a.Fragment,null,a.a.createElement(N,{text:s}),a.a.createElement(H,{value:i,isFinish:!!u,onInput:this.onInput,setRef:function(e){t.input=e}}))}}]),n}(r.Component),it=Object(s.b)((function(t){return{text:f(t),startTime:m(t),endTime:h(t)}}),at)(ot),ct=n(3),ut={activeText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",isTimer:!1},st={selectedLang:"en",isFetching:!1,texts:[],selectedText:null},lt=Object(l.combineReducers)({typingText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FINISH":return Object(ct.a)({},t,{endTime:e.time});case"START_TIMER":return Object(ct.a)({},t,{isTimer:!0,activeText:e.text});case"START_RACE":return Object(ct.a)({},t,{isTimer:!1,startTime:e.time});case"RESTART_RACE":return Object(ct.a)({},ut);default:return t}},textConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_LANG":return Object(ct.a)({},t,{selectedLang:e.langCode});case"REQUEST_TEXTS":return Object(ct.a)({},t,{isFetching:!0});case"RECEIVE_TEXTS":return Object(ct.a)({},t,{isFetching:!1,texts:e.texts});default:return t}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(35);var pt=Object(l.createStore)(lt,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(c.a)));i.a.render(a.a.createElement(s.a,{store:pt},a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.678e6c3d.chunk.js.map